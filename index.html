<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Football Play Data Dashboard</title>
  <!-- Link to External CSS -->
  <link rel="stylesheet" href="index.css">
  <!-- Chart.js and Plugins -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
  <!-- jsPDF Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"> </script>
  <!-- html2canvas Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
  <!-- XLSX Library -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx"></script>
</head>

<body>
  <div class="container">
    <h1>Football Play Data Dashboard</h1>
    <div class="file-upload">
      <label for="fileInput">Upload Hudl CSV/XLSX File:</label>
      <input type="file" id="fileInput" accept=".csv, .xlsx" />
    </div>

    <div class="summary-container">
      <!-- Overall Stats -->
      <div class="overall-stats">
        <h2>Overall Statistics</h2>
        <div class="summary-item">Total Yards: <span id="totalYards">0</span></div>
        <div class="summary-item">Yards Per Play: <span id="yardsPerPlay">0</span></div>
        <div class="summary-item">Total Touchdowns: <span id="totalTouchdowns">0</span></div>
        <div class="summary-item">Turnovers: <span id="turnovers">0</span></div>
      </div>

      <!-- Rushing Stats -->
      <div class="rushing-stats">
        <h2>Rushing Statistics</h2>
        <div class="summary-item">Rushing Yards: <span id="rushingYards">0</span></div>
        <div class="summary-item">Yards Per Carry: <span id="yardsPerRun">0</span></div>
        <div class="summary-item">Rushing TDs: <span id="rushingTouchdowns">0</span></div>
        <div class="summary-item">Fumbles: <span id="fumbles">0</span></div>
      </div>

      <!-- Passing Stats -->
      <div class="passing-stats">
        <h2>Passing Statistics</h2>
        <div class="summary-item">Passing Yards: <span id="passingYards">0</span></div>
        <div class="summary-item">Yards Per Pass Attempt: <span id="yardsPerPass">0</span></div>
        <div class="summary-item">Passing TDs: <span id="passingTouchdowns">0</span></div>
        <div class="summary-item">INTs: <span id="interceptions">0</span></div>
      </div>
    </div>

    <!-- Run/Pass Effectiveness -->
    <div class="chart-container">
      <h2>Run and Pass Effectiveness</h2>
      <div class="effectiveness-charts">
        <div>
          <h3>Run Effectiveness</h3>
          <canvas id="runEffectivenessChart"></canvas>
        </div>
        <div>
          <h3>Pass Effectiveness</h3>
          <canvas id="passEffectivenessChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Run/Pass Split by Down -->
    <div class="chart-container">
      <h2>Run/Pass Split by Down</h2>
      <div class="down-charts">
        <div>
          <h3>1st Down</h3>
          <canvas id="firstDownChart"></canvas>
        </div>
        <div>
          <h3>2nd Down</h3>
          <canvas id="secondDownChart"></canvas>
        </div>
        <div>
          <h3>3rd Down</h3>
          <canvas id="thirdDownChart"></canvas>
        </div>
        <div>
          <h3>4th Down</h3>
          <canvas id="fourthDownChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Favorite Formations Table -->
    <div class="table-container">
      <h2>Favorite Formations</h2>
      <table id="favoriteFormationsTable">
        <thead>
          <tr>
            <th>Formation</th>
            <th>Count</th>
            <th>Percentage</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="table-container">
      <h2>Favorite Plays</h2>
      <div id="playsByFormationContainer">
        <!-- Individual tables for each formation will be dynamically added here -->
      </div>
    </div>

    <div class="chart-container">
      <h2>Coverage and Defensive Front by Down</h2>
      <div class="bar-charts">
        <div>
          <h3>1st Down - COVERAGE</h3>
          <canvas id="coverageDown1Chart"></canvas>
        </div>
        <div>
          <h3>1st Down - DEF FRONT</h3>
          <canvas id="frontDown1Chart"></canvas>
        </div>
        <div>
          <h3>2nd Down - COVERAGE</h3>
          <canvas id="coverageDown2Chart"></canvas>
        </div>
        <div>
          <h3>2nd Down - DEF FRONT</h3>
          <canvas id="frontDown2Chart"></canvas>
        </div>
        <div>
          <h3>3rd Down - COVERAGE</h3>
          <canvas id="coverageDown3Chart"></canvas>
        </div>
        <div>
          <h3>3rd Down - DEF FRONT</h3>
          <canvas id="frontDown3Chart"></canvas>
        </div>
        <div>
          <h3>4th Down - COVERAGE</h3>
          <canvas id="coverageDown4Chart"></canvas>
        </div>
        <div>
          <h3>4th Down - DEF FRONT</h3>
          <canvas id="frontDown4Chart"></canvas>
        </div>
      </div>
    </div>

    <!-- Export Buttons -->
    <div style="text-align: center; margin: 20px;">
      <button id="exportToPdfBtn" style="padding: 10px 20px; font-size: 1rem; background-color: #4caf50; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px;">
        Export to PDF
      </button>
      <button id="exportToImageBtn" style="padding: 10px 20px; font-size: 1rem; background-color: #2196f3; color: white; border: none; border-radius: 5px; cursor: pointer;">
        Export to Image
      </button>
    </div>
  </div>
  <!-- Image Modal -->
  <div id="imageModal">
    <span class="close" id="closeModal">&times;</span>
    <img id="exportedImage" src="" alt="Exported Dashboard">
  </div>
  <!-- Link to External JavaScript -->
  <script src="index.js"></script>
</body>
</html>
